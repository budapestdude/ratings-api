#!/bin/bash
# PASTE THIS ENTIRE SCRIPT INTO RENDER SHELL

echo "Creating FIDE database on Render..."

# Create the database directory
mkdir -p /var/data
cd /var/data

# Create the database from base64
cat > create_db.sh << 'EOF'
#!/bin/bash

# This script will be completed by the next part
echo "Extracting database..."

# The base64 data will be added here
cat << 'DATABASE_END' | base64 -d | gunzip > fide_ratings.db
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
DATABASE_END

echo "Database created!"
sqlite3 fide_ratings.db "SELECT COUNT(*) as 'Total Players:' FROM players;"
EOF

chmod +x create_db.sh
./create_db.sh

echo "âœ… Database loaded successfully!"
